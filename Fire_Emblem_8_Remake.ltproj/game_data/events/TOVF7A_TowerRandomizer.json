[
    {
        "name": "TowerRandomizer",
        "trigger": "level_start",
        "level_nid": "TOVF7A",
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "",
            "for;enemy_unit;{u for u in game.level.units if u.team in ['enemy','enemy2']} ",
            "change_team;{enemy_unit};enemy2",
            "endf",
            "",
            "#Randomize enemy positions",
            "",
            "for;enemy_unit;{u for u in game.level.units if u.team in ['enemy','enemy2']} ",
            "if;unit.nid != '132' or unit.nid != '133' or unit.nid != '134' or unit.nid != '135' or unit.nid != '136' or unit.nid != '137' or unit.nid != '138' or unit.nid != '139' or unit.nid != '140' or unit.nid != '141'or unit.nid != '142'",
            "level_var;move_pos_x;game.get_unit('{enemy_unit}').position[0]",
            "level_var;move_pos_x1;game.get_unit('{enemy_unit}').position[0]+1",
            "level_var;move_pos_x2;game.get_unit('{enemy_unit}').position[0]-1",
            "level_var;move_pos_y;game.get_unit('{enemy_unit}').position[1]",
            "level_var;move_pos_y1;game.get_unit('{enemy_unit}').position[1]+1",
            "level_var;move_pos_y2;game.get_unit('{enemy_unit}').position[1]-1",
            "level_var;Position;game.get_random(1, 9)",
            "if;game.level_vars['Position'] == 1",
            "move_unit;{enemy_unit};{v:move_pos_x},{v:move_pos_y};;closest;1",
            "elif;game.level_vars['Position'] == 2",
            "move_unit;{enemy_unit};{v:move_pos_x1},{v:move_pos_y};;closest;1",
            "elif;game.level_vars['Position'] == 3",
            "move_unit;{enemy_unit};{v:move_pos_x2},{v:move_pos_y};;closest;1",
            "elif;game.level_vars['Position'] == 4",
            "move_unit;{enemy_unit};{v:move_pos_x},{v:move_pos_y1};;closest;1",
            "elif;game.level_vars['Position'] == 5",
            "move_unit;{enemy_unit};{v:move_pos_x1},{v:move_pos_y1};;closest;1",
            "elif;game.level_vars['Position'] == 6",
            "move_unit;{enemy_unit};{v:move_pos_x2},{v:move_pos_y1};;closest;1",
            "elif;game.level_vars['Position'] == 7",
            "move_unit;{enemy_unit};{v:move_pos_x},{v:move_pos_y2};;closest;1",
            "elif;game.level_vars['Position'] == 8",
            "move_unit;{enemy_unit};{v:move_pos_x1},{v:move_pos_y2};;closest;1",
            "elif;game.level_vars['Position'] == 9",
            "move_unit;{enemy_unit};{v:move_pos_x2},{v:move_pos_y2};;closest;1",
            "end",
            "",
            "else",
            "end",
            "",
            "endf",
            "",
            "#Randomize enemy units and drops",
            "for;enemy_unit;{u for u in game.level.units if u.team in ['enemy','enemy2']}",
            "level_var;UnitChange;game.get_random(1, 8)",
            "if;game.level_vars['UnitChange'] == 1",
            "make_generic;;Entombed;15;enemy2;AI=Defend;ItemList=Poison_Claw",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "    level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 2",
            "make_generic;;Sword_Wight;15;enemy2;AI=Defend;ItemList=Iron_Lance",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "give_wexp;{created_unit};Lance;180;no_banner",
            "remove_item;{created_unit};Iron_Lance;no_banner",
            "level_var;EnemyWeapon;game.get_random(1, 8)",
            "    if;game.level_vars['EnemyWeapon'] == 1",
            "    give_item;{created_unit};Blue_Fire_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 2",
            "    give_item;{created_unit};Mist_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 3",
            "    give_item;{created_unit};Geyser_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 4",
            "    give_item;{created_unit};Glacier_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 5",
            "    give_item;{created_unit};Bolt_Spear;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 6",
            "    give_item;{created_unit};Shielder_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 7",
            "    give_item;{created_unit};Seraphim_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 8",
            "    give_item;{created_unit};Fenrir_Spear;no_banner;",
            "    end",
            "level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 3",
            "make_generic;;Bow_Wight;15;enemy2;AI=Defend;ItemList=Iron_Bow",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "give_wexp;{created_unit};Bow;180;no_banner",
            "remove_item;{created_unit};Iron_Bow;no_banner",
            "level_var;EnemyWeapon;game.get_random(1, 8)",
            "    if;game.level_vars['EnemyWeapon'] == 1",
            "    give_item;{created_unit};Twist_Bow;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 2",
            "    give_item;{created_unit};Gale_Bow;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 3",
            "    give_item;{created_unit};Aqua_Burst;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 4",
            "    give_item;{created_unit};Glacier_Bow;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 5",
            "    give_item;{created_unit};Arc_Bow;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 6",
            "    give_item;{created_unit};Stone_Edge;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 7",
            "    give_item;{created_unit};Shine_Bow;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 8",
            "    give_item;{created_unit};Abyss_Bow;no_banner;",
            "    end",
            "level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 4",
            "make_generic;;Sword_Wight;15;enemy2;AI=Defend;ItemList=Iron_Sword",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "remove_item;{created_unit};Iron_Sword;no_banner",
            "give_wexp;{created_unit};Sword;180;no_banner",
            "level_var;EnemyWeapon;game.get_random(1, 8)",
            "    if;game.level_vars['EnemyWeapon'] == 1",
            "    give_item;{created_unit};Heat_Sword;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 2",
            "    give_item;{created_unit};Mist_Sword;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 3",
            "    give_item;{created_unit};Lakeburst_Sword;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 4",
            "    give_item;{created_unit};Shiver_Sword;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 5",
            "    give_item;{created_unit};Storm_Sword;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 6",
            "    give_item;{created_unit};Gaia_Blade;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 7",
            "    give_item;{created_unit};Holy_Sword_Shop;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 8",
            "    give_item;{created_unit};Nightingale;no_banner;",
            "    end",
            "level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 5",
            "make_generic;;Maelduin;15;enemy2;AI=Defend;ItemList=Poison_Axe",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "give_wexp;{created_unit};Axe;180;no_banner",
            "remove_item;{created_unit};Poison_Axe;no_banner",
            "level_var;EnemyWeapon;game.get_random(1, 8)",
            "    if;game.level_vars['EnemyWeapon'] == 1",
            "    give_item;{created_unit};Wrath_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 2",
            "    give_item;{created_unit};Hurricane_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 3",
            "    give_item;{created_unit};Flowing_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 4",
            "    give_item;{created_unit};Glacier_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 5",
            "    give_item;{created_unit};Bolt_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 6",
            "    give_item;{created_unit};Jagged_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 7",
            "    give_item;{created_unit};Sol_Axe;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 8",
            "    give_item;{created_unit};Devil Axe;no_banner;",
            "    end",
            "level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 6",
            "make_generic;;Gwyllgi;15;enemy2;AI=Defend;ItemList=Fiery_Fang",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "    level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 7",
            "make_generic;;Elder_Bael;15;enemy2;AI=Defend;ItemList=Poison_Claw",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "    level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 8",
            "make_generic;;Deathgoyle;15;enemy2;AI=Defend;ItemList=Iron_Lance",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "give_wexp;{created_unit};Lance;180;no_banner",
            "remove_item;{created_unit};Iron_Lance;no_banner",
            "level_var;EnemyWeapon;game.get_random(1, 8)",
            "    if;game.level_vars['EnemyWeapon'] == 1",
            "    give_item;{created_unit};Blue_Fire_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 2",
            "    give_item;{created_unit};Mist_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 3",
            "    give_item;{created_unit};Geyser_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 4",
            "    give_item;{created_unit};Glacier_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 5",
            "    give_item;{created_unit};Bolt_Spear;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 6",
            "    give_item;{created_unit};Shielder_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 7",
            "    give_item;{created_unit};Seraphim_Lance;no_banner;",
            "    elif;game.level_vars['EnemyWeapon'] == 8",
            "    give_item;{created_unit};Fenrir_Spear;no_banner;",
            "    end",
            "level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "elif;game.level_vars['UnitChange'] == 9",
            "make_generic;;Arch_Mogall;15;enemy2;AI=Defend;ItemList=Evil_Eye",
            "add_unit;{created_unit};{enemy_unit};immediate;push",
            "    level_var;Drop;game.get_random(1, 167)",
            "    if;game.level_vars['Drop'] == 1",
            "    give_item;{created_unit};Thunder_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 2",
            "    give_item;{created_unit};Crossbow_Scroll;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 3",
            "    give_item;{created_unit};Energy_Ring_Consumable;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 4",
            "    give_item;{created_unit};Balance_Belt;no_banner;droppable",
            "    elif;game.level_vars['Drop'] == 5",
            "    give_item;{created_unit};Looking_Glass;no_banner;droppable",
            "    end",
            "remove_unit;{enemy_unit}",
            "end",
            "",
            "endf"
        ],
        "nid": "TOVF7A TowerRandomizer"
    }
]