[
    {
        "name": "Weapon_Randomizer",
        "trigger": "level_start",
        "level_nid": "17A",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#pyev1",
            "import random",
            "#Generate variables",
            "swords=['Heat_Sword','Mist_Sword','Lakeburst_Sword','Shiver_Sword','Levin_Sword','Gaia_Blade','Holy_Sword_Shop','Nightingale']",
            "lances=['Blue_Fire_Lance','Mist_Lance','Geyser_Lance','Glacier_Lance','Bolt_Spear','Shielder_Lance','Seraphim_Lance','Fenrir_Spear']",
            "axes=['Wrath_Axe', 'Hurricane_Axe', 'Flowing_Axe', 'Glacier_Axe', 'Bolt_Axe', 'Jagged_Axe', 'Sol_Axe', 'Devil Axe']",
            "bows=['Twist_Bow', 'Gale_Bow', 'Aqua_Burst', 'Glacier_Bow', 'Arc_Bow', 'Stone_Edge', 'Shine_Bow', 'Abyss_Bow']",
            "claws=['Sharp Claw','Acid_Fur']",
            "fangs=['Hellfang','Acid_Fur']",
            "staves=['Arcane_Staff','Boomburst','Water_Burst','Bolt_Staff','Frozen_Staff','Rapture_Staff','Magelight','Abyss_Staff']",
            "anima=['Explosion','Aircalibur','Aqua_Triple_Burst','Iceshock','Big_Bolt','Flamberge','Storm']",
            "light=['Solaris','Life_Burst','Shine_Fire','Smite','Crusade_of_Water','Chaos_Bolt']",
            "dark=['Bloody_Flux','Fused_Dark_Bolt','Hallucinogens','Corruption_Orb','Night_Purge']",
            "item_pool=swords+lances+axes+bows+claws+fangs+staves+anima+light+dark",
            "viable_items=[]",
            "enemyunits=game.get_enemy_units(False)",
            "#Add random weapons   ",
            "for u in enemyunits:                          ",
            "    for it in item_pool:",
            "        it_obj=DB.items.get(it)",
            "        wpn_level=it_obj.weapon_rank.value",
            "        if u.wexp[it_obj.weapon_type.value]>=DB.weapon_ranks.get(wpn_level).requirement:",
            "            viable_items.append(it)",
            "    if len(viable_items) != 0:",
            "        r=random.choice(viable_items)",
            "        $give_item u.nid r,no_banner",
            "        viable_items=[]",
            "    ",
            "    ",
            "#Old code that could be useful",
            "#for u in enemyunits:",
            " #   for j in range(len(u.items)):",
            "  #      if item_system.weapon_type(u, u.items[j]) == 'Sword':",
            " #           $give_wexp u.nid \"Sword\" 300,no_banner",
            " #           $give_item u.nid random.choice(swords),no_banner",
            " #       elif item_system.weapon_type(u, u.items[j]) == 'Lance':",
            " #           $give_wexp u.nid \"Lance\" 300,no_banner",
            "  #          $give_item u.nid random.choice(lances),no_banner"
        ],
        "nid": "17A Weapon_Randomizer"
    }
]