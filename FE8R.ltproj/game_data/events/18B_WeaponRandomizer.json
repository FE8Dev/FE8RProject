[
    {
        "name": "WeaponRandomizer",
        "trigger": "level_start",
        "level_nid": "18B",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#pyev1",
            "import random",
            "#Generate variables",
            "swords=['Helix_Blade_Anima','Volcano_Sword','Sword_of_Fog','Kame_no_Katana','Glacier_Blade','Bolt_Sword','Terraform_Blade','Raze_Sword','Helix_Blade_Dark','Demon_Sword']",
            "lances=['Inferno_Spear','Jetstream_Greatlance','Lance_of_Fog','Iceberg_Lance','Storm_Spear','Burning_Greatlance_Shop','Hand_Of_Fate','Demon_Greatlance','Demon_Spear']",
            "axes=['Seething_Axe', 'Axe_of_Fog', 'Tidal_Warhammer', 'Watercross_Axe', 'Stormbreaker', 'Avalanche_Axe','Dragon_Masher', 'Gaia_Axe', 'Purge_Warhammer','Angel_Axe','Abyss_Axe_Shop']",
            "bows=['Volcano_Bow', 'Fog_Bow', 'Downpour_Bow', 'Yuki_Onna_Bow', 'Thunderclap', 'Darkwood_Greatbow', 'Majestic_Bow', 'Demon_Bow']",
            "staves=['Beam_Staff','Cyclone_Staff','Maelstrom_Staff','Ramuh_Staff','Shiva_Staff','Tremor_Staff','Holy_Staff','Night_Sky']",
            "anima=['Bolganone','Tempest','Geyser_Blasts','Glacies','Thoron','Volcano']",
            "light=['Aureola','Shining_Aura','Goddess_Bomb','Plague','Aura_Glacier']",
            "dark=['Mephiles','Dark_Bolt','Hellfire','Misleading_Light','Ruination']",
            "fangs=['Frost_Fang','Fire_Fang','Thunder_Fang','Abyss_Fang']",
            "claws=['Frost_Claw','Fire_Claw','Thunder_Claw','Gilded_Claw']",
            "breaths=['Fire_Breath','Sea_Breath','Magic_Breath','Arcane_Breath','Black_Breath','Nova_Breath','Abyss_Breath','Fell_Breath']",
            "eyes=['Insight_Eye','Apocalypse_Eye']",
            "stones=['Shadowshot','Stone']",
            "item_pool=swords+axes+lances+bows+claws+fangs+staves+anima+light+dark+breaths+stones+eyes",
            "viable_items=[]",
            "enemyunits=game.get_enemy_units(False)",
            "",
            "",
            "#Add random weapons   ",
            "for u in enemyunits:                          ",
            "    for it in item_pool:",
            "        it_obj=DB.items.get(it)",
            "        wpn_level=it_obj.weapon_rank.value",
            "        if u.wexp[it_obj.weapon_type.value]>=DB.weapon_ranks.get(wpn_level).requirement:",
            "            viable_items.append(it)",
            "    if len(viable_items) != 0:",
            "        r=random.choice(viable_items)",
            "        $give_item u.nid r,no_banner",
            "        viable_items=[]",
            "    ",
            "    ",
            "#Old code that could be useful",
            "#for u in enemyunits:",
            " #   for j in range(len(u.items)):",
            "  #      if item_system.weapon_type(u, u.items[j]) == 'Sword':",
            " #           $give_wexp u.nid \"Sword\" 300,no_banner",
            " #           $give_item u.nid random.choice(swords),no_banner",
            " #       elif item_system.weapon_type(u, u.items[j]) == 'Lance':",
            " #           $give_wexp u.nid \"Lance\" 300,no_banner",
            "  #          $give_item u.nid random.choice(lances),no_banner"
        ],
        "nid": "18B WeaponRandomizer"
    }
]